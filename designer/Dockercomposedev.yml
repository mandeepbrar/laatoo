version: '3'
services:
  designer:
    build:
      context: .
      dockerfile: Dockerfile.designertest
    volumes:
    - /home/mandeep/goprogs/src/laatoo/designer/dist/config/designer:/config/environments/designer
    - /home/mandeep/goprogs/src/laatoo/dist/bin:/bin
    - /home/mandeep/goprogs/src/laatoo/designer/dist/appfiles:/bin/appfiles
    - /home/mandeep/goprogs/src/laatoo/designer/dist/publicdir:/bin/publicdir
    - /home/mandeep/goprogs/src/laatoo/designer/modules:/modules
    - /home/mandeep/goprogs/src/laatoo/designer/modulesrepo:/modulesrepo
    - /home/mandeep/goprogs/src/laatoo:/devmodulesrepo
    ports:
     - "6060:6060"
     - "6061:6061"
    depends_on:
    - mongo
    - logs
    environment:
     - LAATOO_mongoconnectionstring=mongo
    logging:
      driver: syslog
  mongo:
    image: mongo
    ports:
     - "27017:27017"
    volumes:
    - /backups/punjabimehfilmongo:/data/db
  logs:
    build:
      context: .
      dockerfile: Dockerfile.ekanite
    ports:
     - "18080:18080"
     - "5514:5514"
     - "9950:9950"
    volumes:
    - /home/mandeep/goprogs/src/laatoo/designer/logs:/logs
volumes:
  logvolume01: {}
