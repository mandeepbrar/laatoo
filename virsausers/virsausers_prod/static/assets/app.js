!function(){"use strict";angular.module("view",["ngResource","ngStorage","ui.router","ui.bootstrap"])}(),function(){"use strict";function e(e){var t=e(pageConf.ViewsServer);return t}var t=angular.module("view");t.factory("ViewService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(){function e(e,t,n,o){var i=n.name;n["class"]&&(e["class"]="class="+n["class"]),e.viewrows=o.query({viewname:i})}var t={restrict:"E",templateUrl:function(e,t){return"ul"===t.viewtype?"app/components/links/ul.view.html":"table"===t.viewtype?"app/components/view/table.view.html":"app/components/view/view.view.html"},replace:!0,scope:{},transclude:!0,controller:e,controllerAs:"view",bindToController:!0};return e.$inject=["$scope","$element","$attrs","ViewService"],t}angular.module("view").directive("view",e)}(),function(){"use strict";function e(e){e.setType({name:"media",templateUrl:"app/components/media/mediaselector.view.html",controller:t}),e.templateManipulators.preWrapper.push(function(e,t,n){return"media"==t.type&&(n.haslabel=!1,n.field=t.key,n.$watch("model",function(e){try{n.mediasource=e[t.key],n.label=t.templateOptions.label}catch(o){}})),e})}function t(e,t){e.field="",e.chooseMedia=function(o){var i={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"app/components/media/modalchooser.view.html",controller:n,closeButtonText:"Close",actionButtonText:"OK"},a=t.open(i);a.result.then(function(t){e.model[e.field]=t,e.mediasource=t})},e.removeMedia=function(t){e.model[t]="",e.mediasource=""}}function n(e,t,n){var o=e.uploader=new n({url:"/upload",queueLimit:1});o.onCompleteItem=function(e,n,o,i){200==o&&n.length>0&&t.close(n[0])},e.closeDialog=function(){t.dismiss("closed")},e.fileSelected=function(){t.close("http://www.gettyimages.co.uk/gi-resources/images/Homepage/Category-Creative/UK/UK_Creative_462809583.jpg")},e.uploadFile=function(){var e=o.queue[0];e.upload()}}var o=angular.module("media",["ngResource","ui.bootstrap","formly","formlyBootstrap","angularFileUpload"]);o.config(e),e.$inject=["formlyConfigProvider"],t.$inject=["$scope","$modal"],n.$inject=["$scope","$modalInstance","FileUploader"]}(),function(){"use strict";function e(){function e(e,t,n,o){n["class"]&&(e["class"]="class="+n["class"]);n.source&&(e.source=n.source),n.$observe("source",function(t){e.source=t})}var t={restrict:"E",templateUrl:function(e,t){return t.type&&"image"===t.type,"app/components/media/image.view.html"},replace:!0,scope:{},transclude:!0,controller:e,controllerAs:"media",bindToController:!0};return e.$inject=["$scope","$element","$attrs","$http"],t}angular.module("media").directive("media",e)}(),function(){"use strict";angular.module("login",["ngResource","ngStorage","ui.router","ui.bootstrap"])}(),function(){"use strict";function e(){function e(e,t,n){n.name;n["class"]&&(e["class"]="class="+n["class"]);n.social;n.social&&(e.social=!0);n.signup;n.signup&&(e.signup=!0)}var t={restrict:"E",templateUrl:"app/components/login/login.view.html",replace:!0,controller:e,controllerAs:"login",bindToController:!0};return e.$inject=["$scope","$element","$attrs"],t}angular.module("login").directive("login",e)}(),function(){"use strict";function e(e,t,n,o,i){e.login=function(){{var t=e.username,n=e.password;i.login({Id:t,Password:n},function(e,t){localStorage.auth=t(pageConf.AuthToken),window.location.href=pageConf.SuccessRedirect},function(e){console.log("err"+e)})}}}var t=angular.module("login");t.controller("LoginController",e),e.$inject=["$scope","$state","$location","$localStorage","AuthenticationService"]}(),function(){"use strict";function e(e){var t=e(pageConf.LocalAuthServer,{},{login:{method:"POST"}});return t}var t=angular.module("login");t.factory("AuthenticationService",e),e.$inject=["$resource"]}(),function(){"use strict";function e(e){e.setType({name:"ckeditor","extends":"textarea"}),e.templateManipulators.preWrapper.push(function(e,t,n){return"ckeditor"==t.type&&(t.ngModelAttrs={ckeditor:{attribute:"ckeditor"}},t.templateOptions||(t.templateOptions={}),t.templateOptions.ckeditor=""),e})}var t=angular.module("entity",["ngResource","ui.bootstrap","formly","formlyBootstrap","ckeditor"]);t.config(e),e.$inject=["formlyConfigProvider"]}(),function(){"use strict";function e(){function e(e,n,o,i){t=e,o["class"]&&(e["class"]="class="+o["class"]);var a;if(!o.name)throw new Error("Server error. Entity name missing");a=o.name;var r=window.pageConf.entities[a];e.entity=r,e.id=o.id,e.submitText="Submit",o.submitText&&(e.submitText=o.submitText);var l=null;o.id&&(l=o.id),e.onSubmit=function(){var t=e.id;null!=t?(e.entity.model.Id=t,i.put(r.url+"/"+t,e.entity.model).then(function(e){console.log(e)},function(e){console.log("error communicating with server")})):i.post(r.url,e.entity.model).then(function(e){console.log(e)},function(e){console.log(e),console.log("error communicating with server")})},null!=l&&o.$observe("id",function(t){return e.id=t,i.get(r.url+"/"+t).then(function(t){var n=t.data;e.entity.model=n},function(e){console.log("error communicating with server")})})}var t,n={restrict:"E",templateUrl:"app/components/entity/entityform.view.html",scope:{},replace:!0,controller:e,controllerAs:"entityform",bindToController:!0};return e.$inject=["$scope","$element","$attrs","$http"],n}angular.module("entity").directive("entityform",e)}(),function(){"use strict";function e(){function e(e,t,n,o){n["class"]&&(e["class"]="class="+n["class"]);var i;if(!n.name)throw new Error("Server error. Entity name missing");i=n.name;var a;if(!n.id)throw new Error("Server error. Entity id missing");a=n.id;var r=window.pageConf.entities[i];n.$observe("id",function(t){return o.get(r.url+"/"+t).then(function(t){e.entitydata=t.data},function(e){console.log("error communicating with server")})})}var t={restrict:"E",templateUrl:"app/components/entity/entity.view.html",scope:{},replace:!0,transclude:!0,controller:e,controllerAs:"entity",bindToController:!0};return e.$inject=["$scope","$element","$attrs","$http"],t}angular.module("entity").directive("entity",e)}(),function(){"use strict";angular.module("actions",["ngResource","ngStorage","ui.router","ui.bootstrap","ui.router.tabs"])}(),function(){"use strict";function e(){function e(e,t,n,o){var i=n.name;n["class"]&&(e["class"]="class="+n["class"]);var a=i;n.view&&(a=n.view);try{var r=new Array,l=window.pageConf.actionset[i];for(var s in l){var c=l[s],u=c.action,p=window.pageConf.actions[u],m={};m.heading=c.label,m.route=u,m.actiontype=p.actiontype,r.push(m)}e.items=r}catch(d){console.log(d)}}var t={restrict:"E",templateUrl:function(e,t){return"menu"===t.widget?"app/components/actions/menu.view.html":"tab"===t.widget?"app/components/actions/tabs.view.html":"pills"===t.widget?"app/components/actions/pills.view.html":"app/components/actions/menu.view.html"},replace:!0,scope:{},controller:e,controllerAs:"actionset",bindToController:!0};return e.$inject=["$scope","$element","$attrs","$templateCache"],t}var t=angular.module("actions");t.directive("actionset",e)}(),function(){"use strict";function e(){function e(e,t,n,o){var i=n.name;n["class"]&&(e["class"]="class="+n["class"]),n.label&&(e.label=n.label),e.route=i,e.action=window.pageConf.actions[i]}var t={restrict:"E",templateUrl:function(e,t){return"button"===t.widget,"app/components/actions/button.view.html"},replace:!0,scope:{},controller:e,controllerAs:"action",bindToController:!0};return e.$inject=["$scope","$element","$attrs","$templateCache"],t}var t=angular.module("actions");t.directive("action",e)}(),function(){"use strict";function e(){var e=angular.injector(["ng"]),t=e.get("$http"),n=document.location.href,o=n.indexOf("#");o>0&&(n=n.substring(0,o));var i=n+"/conf";return t.get(i).then(function(e){window.pageConf.partials=e.data.partials,angular.element(document).ready(function(){angular.bootstrap(document,["main"])})},function(e){console.log("error communicating with server")})}angular.module("main",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap","login","view","actions","entity","media"]);e()}(),function(){"use strict";function e(e){function t(e,t,n,o){e.params=o,console.log("assigned");n.name;e.confUrl=document.location.href+"/conf",n["class"]&&(e["class"]="class="+n["class"])}var n={restrict:"E",templateUrl:"app/page.view.html",transclude:!0,replace:!0,controller:t,controllerAs:"page",bindToController:!0};return t.$inject=["$scope","$element","$attrs","$stateParams"],n}angular.module("main").directive("page",e),e.$inject=["$http"]}(),function(){"use strict";function e(e,n){for(var o=0;o<window.pageConf.partials.length;o++){var i=window.pageConf.partials[o];n.put(i.Path,i.Template)}try{var a=window.pageConf.actions;for(var r in a){var l=a[r],s=l.view,c=l.url,u=l.templatepath,p=(l.actiontype,l.viewmode,{});p[s]={templateUrl:u},t.stateProvider.state(r,{url:c,views:p})}t.urlRouteProvider.otherwise("/")}catch(m){console.log(m)}e.debug("runBlock end")}var t=angular.module("main").run(e);e.$inject=["$log","$templateCache"]}(),function(){"use strict";function e(e,t){}angular.module("main").config(e),e.$inject=["$stateProvider","$urlRouterProvider"]}(),function(){"use strict";angular.module("main")}(),function(){"use strict";function e(e,n,o){t.stateProvider=e,t.urlRouteProvider=n}var t=angular.module("main").config(e);e.$inject=["$stateProvider","$urlRouterProvider","$httpProvider"]}(),angular.module("main").run(["$templateCache",function(e){e.put("app/page.view.html",'<div ng-transclude=""></div>'),e.put("app/components/entity/entity.view.html",'<div ng-transclude=""></div>'),e.put("app/components/entity/entityform.view.html",'<form><div class="row"><formly-form model="entity.model" fields="entity.fields" ng-if="entity.tabbed!=true"></formly-form><tabset ng-if="entity.tabbed==true"><tab ng-repeat="tab in entity.tabs" heading="{{tab.label}}"><formly-form model="entity.model" fields="tab.fields"></formly-form></tab></tabset></div><formly-form model="entity.model"><button type="submit" class="btn btn-default" ng-click="onSubmit()">{{submitText}}</button></formly-form></form>'),e.put("app/components/login/login.view.html",'<div class="container loginbox" ng-controller="LoginController"><div class="row"><div class="main"><h3>Please Log In<div style="display:inline" ng-if="signup">, or <a href="#">Sign Up</a></div></h3><div class="row" ng-if="social"><div class="col-xs-6 col-sm-6 col-md-6"><a href="#" class="btn btn-lg btn-primary btn-block">Facebook</a></div><div class="col-xs-6 col-sm-6 col-md-6"><a href="#" class="btn btn-lg btn-info btn-block">Google</a></div></div><div class="login-or" ng-if="social"><hr class="hr-or"><span class="span-or">or</span></div><form role="form"><div class="form-group"><label for="inputUsernameEmail">Username or email</label> <input type="text" class="form-control" id="inputUsernameEmail" ng-model="username"></div><div class="form-group"><a class="pull-right" href="#">Forgot password?</a> <label for="inputPassword">Password</label> <input type="password" class="form-control" id="inputPassword" ng-model="password"></div><div class="checkbox pull-right"><label><input type="checkbox"> Remember me</label></div><button type="submit" ng-click="login()" class="btn btn btn-primary">Log In</button></form></div></div></div>'),e.put("app/components/media/image.view.html",'<img src="{{source}}">'),e.put("app/components/media/mediaselector.view.html",'<div><h4>{{label}}</h4><div class="row"><media source="{{mediasource}}" height="100px"></media><div class="pull-right"><button ng-click="removeMedia(\'{{field}}\')" class="btn btn-default">Remove</button> <button ng-click="chooseMedia(\'{{field}}\')" class="btn btn-default">Choose Image</button></div></div></div>'),e.put("app/components/media/modalchooser.view.html",'<div class="container" style="width:540px; height:500px;"><div class="row"><h2>Choose Media</h2></div><hr><tabset class="row" style="height:250px;"><tab heading="Library"><div style="height:260px"><media source="http://www.gettyimages.co.uk/gi-resources/images/Homepage/Category-Creative/UK/UK_Creative_462809583.jpg" height="70px"></media><media source="http://www.gettyimages.co.uk/gi-resources/images/Homepage/Category-Creative/UK/UK_Creative_462809583.jpg" height="70px"></media><media source="http://www.gettyimages.co.uk/gi-resources/images/Homepage/Category-Creative/UK/UK_Creative_462809583.jpg" height="70px"></media></div><hr><div class="row"><button class="btn btn-primary pull-right" ng-click="fileSelected()">Select</button> <button class="btn btn-default pull-right" ng-click="closeDialog()">Cancel</button></div></tab><tab heading="Upload"><div class="row" style="height:260px"><div class="col-md-12"><h3>Upload files</h3><div ng-show="uploader.isHTML5"><div nv-file-drop="" uploader="uploader" class="well my-drop-zone">Drop files here</div></div><input type="file" nv-file-select="" uploader="uploader"><table class="table"><thead><tr><th width="40%">Name</th><th ng-show="uploader.isHTML5">Size</th><th ng-show="uploader.isHTML5">Progress</th><th>Status</th><th>Actions</th></tr></thead><tbody><tr ng-repeat="item in uploader.queue"><td><strong>{{ item.file.name }}</strong></td><td ng-show="uploader.isHTML5" nowrap="">{{ item.file.size/1024/1024|number:2 }} MB</td><td ng-show="uploader.isHTML5"><div class="progress" style="margin-bottom: 0;"><div class="progress-bar" role="progressbar" ng-style="{ \'width\': item.progress + \'%\' }"></div></div></td><td class="text-center"><span ng-show="item.isSuccess"><i class="glyphicon glyphicon-ok"></i></span> <span ng-show="item.isCancel"><i class="glyphicon glyphicon-ban-circle"></i></span> <span ng-show="item.isError"><i class="glyphicon glyphicon-remove"></i></span></td><td nowrap=""><button type="button" class="btn btn-warning btn-xs" ng-click="item.cancel()" ng-disabled="!item.isUploading"><span class="glyphicon glyphicon-ban-circle"></span> Cancel</button> <button type="button" class="btn btn-danger btn-xs" ng-click="item.remove()"><span class="glyphicon glyphicon-trash"></span> Remove</button></td></tr></tbody></table></div></div><hr><div class="row"><button class="btn btn-primary pull-right" ng-click="uploadFile()" ng-show="uploader.queue.length"><span class="glyphicon glyphicon-upload"></span> Upload</button> <button class="btn btn-default pull-right" ng-click="closeDialog()">Cancel</button></div></tab></tabset></div>'),e.put("app/components/actions/button.view.html",'<a class="btn btn-default" ui-sref="{{route}}" role="button">{{label}}s</a>'),e.put("app/components/actions/menu.view.html",'<div class="navbar navbar-default"><ul class="nav navbar-nav"><li ng-repeat="item in items"><a ng-href="{{item.route}}" ng-if="item.actiontype!=\'openpartialpage\'">{{item.heading}}</a> <a ui-sref="{{item.heading}}" ng-if="item.actiontype===\'openpartialpage\'">{{item.heading}}</a></li></ul></div>'),e.put("app/components/actions/pills.view.html",'<div class="row"><tabs data="items" type="pills" vertical="true"></tabs></div>'),e.put("app/components/actions/tabs.view.html",'<div class="row"><tabs data="items" type="tabs"></tabs></div>'),e.put("app/components/view/table.view.html",'<table class="table" ng-transclude=""></table>'),e.put("app/components/view/ul.view.html",'<div class="container"><ul ng-transclude=""></ul></div>'),e.put("app/components/view/view.view.html",'<div ng-transclude=""></div>')}]);